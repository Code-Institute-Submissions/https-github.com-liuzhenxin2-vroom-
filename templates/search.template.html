{% extends 'base.template.html' %} {% block content %}
<h3>Search for your dream car:</h3>

<form method="GET" class="form-inline">
  <input
    type="text"
    name="car_seller_name"
    class="form-control mr-2"
    value="{{car_seller_name}}"
    placeholder="Enter seller name"
  />
  <input
    type="text"
    name="country"
    class="form-control mr-2"
    value="{{required_country}}"
    placeholder="Enter country"
  />
  <input type="submit" value="Search" class="btn btn-primary" />
</form>
    {% if page_number < number_of_pages %}
    <a
    href="{{ url_for('search', page_number=page_number+1, car_seller_name=car_seller_name ) }}"
    >Next Page</a
    >
    {% endif%} 
    {% for page_no in range(number_of_pages+1) %}
    {%if number_of_results > 0 %}
    <a
    href="{{ url_for('search', page_number=page_no, car_seller_name=car_seller_name ) }}"
    >{{page_no+1}}</a
    >
    {%endif%}
    {% endfor %} {% if page_number >= 1 %}
    <a class="disabled"
    href="{{ url_for('search', page_number=page_number-1, car_seller_name=car_seller_name) }}"
    aria-disabled="true">Previous Page</a
    >
    {%endif%}
    <div
    class="row row-cols-1 row-cols-md-3 d-flex justify-content-around align-items-start"
    >
    {% for each_listing in listings %}
    <div
        class="card"
        style="margin: 2%; border: 2px white solid; box-shadow: 5px 5px;"
    >
        <div id="carouselControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
            <img
                src="{{url_for('static', filename='pictures/index-main-background.jpg')}}"
                class="w-100"
                alt="..."
            />
            </div>
            <div class="carousel-item">
            <img
                src="{{url_for('static', filename='pictures/index-main-background.jpg')}}"
                class="w-100"
                alt="..."
            />
            </div>
            <div class="carousel-item">
            <img
                src="{{url_for('static', filename='pictures/index-main-background.jpg')}}"
                class="w-100"
                alt="..."
            />
            </div>
        </div>
        <a
            class="carousel-control-prev"
            href="#carouselControls"
            role="button"
            data-slide="prev"
        >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a
            class="carousel-control-next"
            href="#carouselControls"
            role="button"
            data-slide="next"
        >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
        </div>
        <div class="card-body">
        <h5 class="card-title">Sold By:</h5>
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
            <a href="{{url_for('show_seller_listings', seller_id=each_listing.seller_id)}}">{{each_listing.seller_name}}</a>
            </li>
        </ul>

        <div id="accordion_{{each_listing._id}}">
            <div class="card">
            <div class="card-header" id="car_header_details_{{each_listing._id}}">
                <h5 class="mb-0">
                <button
                    class="btn btn-link"
                    data-toggle="collapse"
                    data-target="#car_details_{{each_listing._id}}"
                    aria-expanded="false"
                    aria-controls="car_details_{{each_listing._id}}"
                >
                    Car Details
                </button>
                </h5>
            </div>

            <div
                id="car_details_{{each_listing._id}}"
                class="collapse"
                aria-labelledby="car_header_details_{{each_listing._id}}"
                data-parent="#accordion_{{each_listing._id}}"
            >
                <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                    Brand: {{each_listing.car.car_brand}}
                    </li>
                    <li class="list-group-item">
                    Model: {{each_listing.car.car_model}}
                    </li>
                    <li class="list-group-item">
                    Car Type: {{each_listing.car.car_type}}
                    </li>
                    <li class="list-group-item">
                    Horse Power: {{each_listing.car.car_hp}} bhp
                    </li>
                    <li class="list-group-item">
                    Condition: {{each_listing.car.car_condition}}
                    </li>
                    <li class="list-group-item">
                    Year Manufactured: {{each_listing.car.car_year}}
                    </li>
                    <li class="list-group-item">
                    Asking Price: ${{each_listing.car.car_price}}
                    </li>
                    <li class="list-group-item">
                    Mileage: {{each_listing.car.car_mileage}} Km
                    </li>
                </ul>
                </div>
            </div>
            </div>
        </div>
        </div>
    </div>
    {%endfor%}
    </div>


{% endblock%}
